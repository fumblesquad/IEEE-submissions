<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Singularity | Hyper-Radiant</title>
    <style>
        :root {
            --joy: #FFD700;       
            --anxiety: #FF0000;   
            --sadness: #0066FF;   
            --calm: #00FFCC;      

            --joy-bg: #141100;
            --anxiety-bg: #140000;
            --sadness-bg: #000514;
            --calm-bg: #001411;
        }

        body, html {
            margin: 0; padding: 0; width: 100%; height: 100%;
            background: #000; overflow: hidden; cursor: none;
            font-family: 'Inter', -apple-system, sans-serif;
            transition: background 1.5s cubic-bezier(0.19, 1, 0.22, 1);
        }

        body::after {
            content: ""; position: fixed; inset: -50%; width: 200%; height: 200%;
            background-image: url('https://grainy-gradients.vercel.app/noise.svg');
            opacity: 0.1; pointer-events: none; z-index: 50;
            animation: grain 8s steps(10) infinite;
        }
        @keyframes grain { 
            0%, 100% { transform:translate(0, 0); } 
            10% { transform:translate(-5%, -10%); } 
            50% { transform:translate(12%, 9%); } 
        }

        #atmosphere {
            position: fixed; inset: 0; pointer-events: none; z-index: 2;
            opacity: 0; transition: opacity 1.2s ease, background 1.5s ease;
            backdrop-filter: blur(40px);
            mix-blend-mode: screen;
        }

        .well {
            position: fixed; width: 90vw; height: 90vh;
            filter: blur(140px); opacity: 0.35; 
            transition: all 1.2s cubic-bezier(0.19, 1, 0.22, 1);
            pointer-events: none; z-index: 1;
        }
        .w-joy { top: -25%; left: -25%; background: radial-gradient(circle, var(--joy), transparent 80%); }
        .w-anxiety { top: -25%; right: -25%; background: radial-gradient(circle, var(--anxiety), transparent 80%); }
        .w-sad { bottom: -25%; left: -25%; background: radial-gradient(circle, var(--sadness), transparent 80%); }
        .w-calm { bottom: -25%; right: -25%; background: radial-gradient(circle, var(--calm), transparent 80%); }
        
        .active-well { opacity: 0.95 !important; transform: scale(1.1); }

        #void-vignette {
            position: fixed; inset: 0;
            background: radial-gradient(circle at center, #000 15%, transparent 75%);
            z-index: 15; cursor: pointer;
        }

        #ui-label {
            position: fixed; top: 50%; left: 50%;
            transform: translate(-50%, -50%);
            color: white; font-weight: 300; font-size: 11px;
            letter-spacing: 40px; text-transform: uppercase;
            opacity: 0; transition: all 1.2s ease;
            z-index: 30; pointer-events: none;
            text-shadow: 0 0 25px currentColor;
        }

        #fx-canvas {
            position: fixed; inset: 0; z-index: 5;
            pointer-events: none; opacity: 0;
            transition: opacity 0.8s ease;
        }

        .zones {
            position: fixed; inset: 0; display: grid;
            grid-template-columns: 1fr 1fr; grid-template-rows: 1fr 1fr;
            z-index: 100;
        }
        .zone { cursor: pointer; }

        #cursor {
            position: fixed; width: 6px; height: 6px;
            background: white; border-radius: 50%;
            pointer-events: none; z-index: 1000;
            mix-blend-mode: difference;
            box-shadow: 0 0 15px white, 0 0 30px white;
        }
        
        body.locked #atmosphere { opacity: 0.8; backdrop-filter: blur(80px); }
        body.locked #ui-label { opacity: 1; letter-spacing: 65px; }
        body.locked .well { opacity: 0 !important; }
    </style>
</head>

<body id="main-body">

    <div id="cursor"></div>
    <div id="void-vignette" onclick="fullReset()"></div>
    <div id="atmosphere"></div>
    <div id="ui-label">Neutral</div>
    <canvas id="fx-canvas"></canvas>

    <div class="well w-joy" id="w-joy"></div>
    <div class="well w-anxiety" id="w-anxiety"></div>
    <div class="well w-sad" id="w-sad"></div>
    <div class="well w-calm" id="w-calm"></div>

    <div class="zones">
        <div class="zone" onmouseenter="setMode('joy')" onclick="lock()"></div>
        <div class="zone" onmouseenter="setMode('anxiety')" onclick="lock()"></div>
        <div class="zone" onmouseenter="setMode('sadness')" onclick="lock()"></div>
        <div class="zone" onmouseenter="setMode('calm')" onclick="lock()"></div>
    </div>

    <script>
        const body = document.getElementById('main-body');
        const atmos = document.getElementById('atmosphere');
        const label = document.getElementById('ui-label');
        const canvas = document.getElementById('fx-canvas');
        const ctx = canvas.getContext('2d');
        const cursor = document.getElementById('cursor');

        let currentMode = null;
        let isLocked = false;
        let time = 0;

        let mouse = { x: window.innerWidth / 2, y: window.innerHeight / 2 };
        let lerpMouse = { ...mouse };

        document.addEventListener('mousemove', e => {
            mouse.x = e.clientX;
            mouse.y = e.clientY;
            cursor.style.left = e.clientX + 'px';
            cursor.style.top = e.clientY + 'px';

            const dx = e.clientX - window.innerWidth / 2;
            const dy = e.clientY - window.innerHeight / 2;
            if (Math.abs(dx) < 180 && Math.abs(dy) < 180 && !isLocked) fullReset();
        });

        function setMode(mode) {
            if (isLocked) return;
            currentMode = mode;
            label.innerText = mode === 'sadness' ? 'Sorrow' : mode;
            label.style.opacity = 0.5;
            label.style.color = `var(--${mode === 'sadness' ? 'sadness' : mode})`;
            canvas.style.opacity = 1;
            atmos.style.opacity = 1;

            document.querySelectorAll('.well').forEach(w => w.classList.remove('active-well'));
            const selector = mode === 'sadness' ? 'w-sad' : 'w-' + mode;
            document.getElementById(selector).classList.add('active-well');

            const color = getComputedStyle(document.documentElement).getPropertyValue(`--${mode === 'sadness' ? 'sadness' : mode}`);
            atmos.style.background = `radial-gradient(circle at center, ${color} 0%, transparent 90%)`;
        }

        function lock() {
            if (!currentMode) return;
            isLocked = true;
            body.classList.add('locked');
            body.style.background = getComputedStyle(document.documentElement)
                .getPropertyValue(`--${currentMode === 'sadness' ? 'sadness' : currentMode}-bg`);
        }

        function fullReset() {
            isLocked = false;
            currentMode = null;
            body.classList.remove('locked');
            body.style.background = '#000';
            atmos.style.opacity = 0;
            canvas.style.opacity = 0;
            label.style.opacity = 0;
            document.querySelectorAll('.well').forEach(w => w.classList.remove('active-well'));
        }

        function render() {
            lerpMouse.x += (mouse.x - lerpMouse.x) * 0.06;
            lerpMouse.y += (mouse.y - lerpMouse.y) * 0.06;

            ctx.clearRect(0, 0, canvas.width, canvas.height);
            if (!currentMode) {
                requestAnimationFrame(render);
                return;
            }

            time += 0.02;
            const color = getComputedStyle(document.documentElement)
                .getPropertyValue(`--${currentMode === 'sadness' ? 'sadness' : currentMode}`);

            ctx.strokeStyle = color;
            ctx.lineWidth = 2;

            if (currentMode === 'joy') {
                for (let i = 0; i < 8; i++) {
                    let r = (time * 100 + i * 180) % (canvas.width / 1.1);
                    ctx.beginPath();
                    ctx.arc(canvas.width / 2, canvas.height / 2, r, 0, Math.PI * 2);
                    ctx.stroke();
                }
            } else if (currentMode === 'anxiety') {
                ctx.fillStyle = color;
                for (let i = 0; i < 60; i++) {
                    ctx.globalAlpha = Math.random() * 0.5;
                    ctx.fillRect(Math.random() * canvas.width, Math.random() * canvas.height, Math.random() * 200, 1.5);
                }
                ctx.globalAlpha = 1;
            } else if (currentMode === 'sadness') {
                ctx.lineWidth = 4;
                for (let i = 0; i < 20; i++) {
                    let x = (i * (canvas.width / 20));
                    let y = (time * 120 + i * 200) % canvas.height;
                    let bend = (lerpMouse.x - x) * 0.15;
                    ctx.beginPath();
                    ctx.moveTo(x, y);
                    ctx.bezierCurveTo(x + bend, y + 50, x + bend, y + 150, x, y + 200);
                    ctx.stroke();
                }
            } else if (currentMode === 'calm') {
                for (let i = 0; i < 4; i++) {
                    ctx.beginPath();
                    let yB = (canvas.height / 4) * i;
                    for (let x = 0; x < canvas.width; x += 15) {
                        let y = yB + Math.sin(x * 0.004 + time + i) * 80;
                        if (x === 0) ctx.moveTo(x, y); else ctx.lineTo(x, y);
                    }
                    ctx.stroke();
                }
            }

            requestAnimationFrame(render);
        }

        window.onresize = () => {
            canvas.width = window.innerWidth;
            canvas.height = window.innerHeight;
        };
        window.onresize();
        render();
    </script>
</body>
</html>
